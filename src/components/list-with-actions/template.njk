{%- macro _actionLink(action) %}
  <a class="govuk-link {%- if action.classes %} {{ action.classes }}{% endif %}" href="{{ action.href }}" {%- for attribute, value in action.attributes %} {{attribute}}="{{value}}"{% endfor %}>
    {%- if action.html -%}
      {{ action.html | safe }}
    {%- else -%}
      {%- if action.visuallyHiddenText -%}
        <span aria-hidden="true">{{ action.text }}</span>
        <span class="govuk-visually-hidden">{{ action.visuallyHiddenText }}</span>
      {%- else -%}
        {{ action.text }}
      {%- endif -%}
    {%- endif -%}
  </a>
{% endmacro -%}

{# Determine if we need 2 or 3 columns #}
{% set anyItemHasActions = false %}
{% for item in params.items %}
  {% set anyItemHasActions = true if item.actions | length else anyItemHasActions %}
{% endfor -%}

{% if params.items.length > 0 %}
<dl class="hmrc-list-with-actions govuk-summary-list {%- if params.classes %} {{ params.classes }}{% endif %}"{% for attribute, value in params.attributes %} {{attribute}}="{{value}}"{% endfor %}>
  {% for item in params.items %}
  <div class="govuk-summary-list__row {%- if anyItemHasActions and not item.actions %} govuk-summary-list__row--no-actions{% endif %} {%- if row.classes %} {{ row.classes }}{% endif %}">
    <dt class="govuk-summary-list__value">
      {{ item.name.html | indent(4) | trim | safe if item.name.html else item.name.text }}
    </dt>
    {% if item.actions.length %}
      <dd class="govuk-summary-list__actions">
        {% if item.actions.length == 1 %}
          {{ _actionLink(item.actions[0]) | indent(12) | trim }}
        {% else %}
          <ul class="govuk-summary-list__actions-list">
            {% for action in item.actions %}
              <li class="govuk-summary-list__actions-list-item">
                {{ _actionLink(action) | indent(18) | trim }}
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      </dd>
    {% endif %}
  </div>
  {% endfor %}
</dl>
{% endif -%}
